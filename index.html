<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAaUlEQVR4AWPAClyuNqAKrPr/CFVg//89qAI3/k9EFXjx3x+FL/j/P6oC+//PUQUa/p9GFVj6fyqqwPn/uagCb/9zAF1bufDwPAhf+///+v0//wPBdxawgCWI/XRDY3qmDsyWrWVAJi4AAPbHLVcmYZFgAAAAAElFTkSuQmCC" rel="icon" type="image/png" />
  <title>J'Optimisme</title>
<style type="text/css">
/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */button,hr,input{overflow:visible}progress,sub,sup{vertical-align:baseline}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}fieldset{padding:.35em .75em .625em}legend{color:inherit;display:table;max-width:100%;white-space:normal}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}
</style>
<style type="text/css">
html, body {
  background: black;
  color: white;
}
body {
  padding-top: 180px;
  margin: 20px auto;
  width: 100%;
  max-width: 780px;
}

#header {
  width: 100%;
  background-size: 100%;
  background-position: 0 -0.1%;
  padding-top: 26.85%;
  background-color: black;
  position: relative;
  z-index: 1000;
}

#logo-text {
  width: 100%;
  height: 98%;
  background-size: 66%;
  background-repeat: no-repeat;
  top: -22%;
  position: absolute;
  right: -2.2%;
  background-position: right;
}

#logo-face {
  position: absolute;
  height: 200%;
  width: 43%;
  background-size: 100%;
  top: -43%;
  background-repeat: no-repeat;
  left: -6.7%;
  display: inline-block;
}

#container {
  width: 100%;
  background: white;
  background-size: 100%;
  background-position: top;
  padding-top: 12%;
  position: relative;
}

#bottom-border {
  padding-top: 12%;
  width: 100%;
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: bottom;
  position: absolute;
  bottom: 0;
}

#footer {
  padding-bottom: 16%;
  background-size: 100%;
  width: 100%;
  background-repeat: no-repeat;
  background-position: bottom;
}

.article {
  display: block;
  width: 90%;
  background: white;
  margin: 0 auto 20px;
  box-sizing: border-box;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
}

.article img {
  width: 100%;
  position: absolute;
  top: 0;
}

@media (max-width: 780px) {
  body { padding-top: 23% }
}

#footer { background-image: url('./img/footer-message.gif') }
#header { background-image: url('./img/contour-top.png') }
.article { background-image: url('./img/sablier.png') }
#container { background-image: url('./img/contour.png') }
#logo-face { background-image: url('./img/leandre-portrait.png') }
#logo-text { background-image: url('./img/leandre-signe.png') }
#bottom-border { background-image: url('./img/contour-bottom.png') }

.webp .article { background-image: url('./img/sablier.webp') }
.webp #container { background-image: url('./img/contour.webp') }
.webp #logo-face { background-image: url('./img/leandre-portrait.webp') }
.webp #logo-text { background-image: url('./img/leandre-signe.webp') }

@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and ( min--moz-device-pixel-ratio: 2),
only screen and ( -o-min-device-pixel-ratio: 2/1),
only screen and ( min-device-pixel-ratio: 2),
only screen and ( min-resolution: 192dpi),
only screen and ( min-resolution: 2dppx) {
  #logo-face { background-image: url('./img/x2/leandre-portrait.png') }
  #logo-text { background-image: url('./img/x2/leandre-signe.png') }
  .webp #logo-face { background-image: url('./img/x2/leandre-portrait.webp') }
  .webp #logo-text { background-image: url('./img/x2/leandre-signe.webp') }
}

</style>
</head>
<body>
<div id="header">
  <div id="logo-text"></div>
  <div id="logo-face"></div>
</div>
<div id="container">
  <!-- ⚡ -->
  <div class="article" id="LINKY.png" style="padding-top: 73.9316%"></div>

  <div class="article" id="LINKY.png" style="padding-top: 73.9316%"></div>

  <div id="bottom-border"></div>
</div>
<div id="footer">
  <!--
  <div id="mc_embed_signup">
    <form novalidate
      action="https://nan.us17.list-manage.com/subscribe/post?u=289969fb55806b7d2e2b37001&amp;id=13731171a2"
      method="post"
      id="mc-embedded-subscribe-form"
      name="mc-embedded-subscribe-form"
      class="validate"
      target="_blank">
      <label for="mce-EMAIL">S'abonné</label>
      <input required
        type="email"
        value=""
        name="EMAIL"
        class="email"
        id="mce-EMAIL"
        placeholder="email address">
      <div style="position: absolute; left: -5000px;" aria-hidden="true">
        <input type="text" name="b_289969fb55806b7d2e2b37001_13731171a2" tabindex="-1" value="">
      </div>
      <input
        type="submit"
        value="Subscribe"
        name="subscribe"
        id="mc-embedded-subscribe"
        class="button">
    </form>
  </div>
  -->
</div>
<img id="web-p" style="visibility: hidden;" src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA">
<script type="text/javascript">
"use strict"

Object.keys || (Object.keys = function (s) {var k,a=[];for (k in s){a.push(k)}})
window.requestAnimationFrame || (window.requestAnimationFrame = setTimeout)
var webP = document.getElementById('web-p').height === 2
var x2 = window.devicePixelRatio > 1 ? '@2x' : ''
webP && document.body.classList.add('webp')
document.getElementById('web-p').remove()

var prev, r, mainElement
var articlesById = {}
var requested = {}
var loaded = {}
var articles = [].map.call(document.getElementsByClassName('article'),
  function (a) {
    var rect = a.getBoundingClientRect()

    return {
      height: rect.height,
      top: document.documentElement.scrollTop + rect.top,
      bottom: (document.documentElement.scrollTop + rect.top) + rect.height,
      id: a.id
    }
  })

articles.forEach(function (a, i, all) {
  a.next = all[(i + 1) % all.length]
  articlesById[a.id] = a
})

function loadImage(a) {
  if (requested[a.id]) return
  requested[a.id] = true

  document.getElementById(a.id).innerHTML = '<picture>'
    + '<source srcset="img/'+ a.id + x2 +'.webp" type="image/webp">'
    + '<source srcset="img/'+ a.id + x2 +'.png" type="image/png">'
    + '<img alt="'+ a.id +'" onload="loadNext(\''+ a.id +'\')" />'
  + '</picture>'
}

function updateHash() {
  if (mainElement === prev) return
  prev = mainElement
  history.replaceState({}, '', `#${mainElement.id}`)
}

function loadNext(id) {
  loaded[id] = true
  var imageLoading = Object.keys(requested).filter(function (r) {
    return !loaded[r]
  })

  if (imageLoading.length) return

  var next = articlesById[id].next
  while (loaded[next.id]) {
    if (next.id === id) return console.log('all loaded')
    next = next.next
    console.log('testing', next.id)
  }
  loadImage(next)
}

function update() {
  r = undefined
  var top = document.documentElement.scrollTop
  var bottom = top + innerHeight
  var inView = articles.filter(function (a) {
    return a.bottom > top && a.top < bottom
  })

  var [ first, second ] = inView

  if (!second) {
    mainElement = first
  } else if (first.top >= top) {
    mainElement = first
  } else if ((first.bottom - top) / first.height > (bottom - second.top) / second.height) {
    mainElement = first
  } else {
    mainElement = second
  }

  inView.forEach(loadImage)
}

function updateOnTick() { r || (r = requestAnimationFrame(update)) }
addEventListener('scroll', updateOnTick, false)
addEventListener('resize', updateOnTick, false)

setTimeout(update)
setInterval(updateHash, 100)
</script>
</body>
</html>
